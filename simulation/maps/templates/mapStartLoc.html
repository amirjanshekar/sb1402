<html>

<head>

    <title>Quick Start - Leaflet</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico">


    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
        integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
        crossorigin="">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>



    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
        integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
        crossorigin=""></script>
    {% load static %}
    <script
        src={% static '/js/lib/leaflet-ant-path-bower-master/leaflet-ant-path-bower-master/dist/leaflet-ant-path.js' %}></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</head>

<body data-gr-c-s-loaded="true">
<div class="d-flex container flex-column justify-content-center vh-100 align-items-center">
     <style>
        img.huechange {
            filter: hue-rotate(120deg);
        }
    </style>
    <div class="w-100 d-flex align-items-center justify-content-center flex-column card h-75 py-5">
        <div id="mapid" class="d-flex position-relative w-75 justify-content-center card
    leaflet-container leaflet-retina leaflet-fade-anim leaflet-grab leaflet-touch-drag d-flex" tabindex="0" style="height: 400px">
        <div class="leaflet-pane leaflet-map-pane" style="transform: translate3d(0px, 0px, 0px);">
            <div class="leaflet-pane leaflet-tile-pane">
                <div class="leaflet-layer " style="z-index: 1; opacity: 1;">
                    <div class="leaflet-tile-container leaflet-zoom-animated"
                        style="z-index: 18; transform: translate3d(0px, 0px, 0px) scale(1);"><img alt=""
                            role="presentation"
                            src="https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/12/2046/1361?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw"
                            class="leaflet-tile leaflet-tile-loaded"
                            style="width: 512px; height: 512px; transform: translate3d(-200px, -347px, 0px); opacity: 1;"><img
                            alt="" role="presentation"
                            src="https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/12/2047/1361?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw"
                            class="leaflet-tile leaflet-tile-loaded"
                            style="width: 512px; height: 512px; transform: translate3d(312px, -347px, 0px); opacity: 1;"><img
                            alt="" role="presentation"
                            src="https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/12/2046/1362?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw"
                            class="leaflet-tile leaflet-tile-loaded"
                            style="width: 512px; height: 512px; transform: translate3d(-200px, 165px, 0px); opacity: 1;"><img
                            alt="" role="presentation"
                            src="https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/12/2047/1362?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw"
                            class="leaflet-tile leaflet-tile-loaded"
                            style="width: 512px; height: 512px; transform: translate3d(312px, 165px, 0px); opacity: 1;">
                    </div>
                </div>
            </div>
            <div class="leaflet-pane leaflet-shadow-pane"></div>
            <div class="leaflet-pane leaflet-overlay-pane"></div>
            <div class="leaflet-pane leaflet-marker-pane"></div>
            <div class="leaflet-pane leaflet-tooltip-pane"></div>
            <div class="leaflet-pane leaflet-popup-pane"></div>
            <div class="leaflet-proxy leaflet-zoom-animated"
                style="transform: translate3d(1.04805e+06px, 697379px, 0px) scale(4096);"></div>
        </div>
        <div class="leaflet-control-container">
            <div class="leaflet-top leaflet-left">
                <div class="leaflet-control-zoom leaflet-bar leaflet-control"><a class="leaflet-control-zoom-in"
                        href="#" title="Zoom in" role="button" aria-label="Zoom in">+</a><a
                        class="leaflet-control-zoom-out" href="#" title="Zoom out" role="button"
                        aria-label="Zoom out">−</a></div>
            </div>
            <div class="leaflet-top leaflet-right"></div>
            <div class="leaflet-bottom leaflet-left"></div>
            <div class="leaflet-bottom leaflet-right">
                <div class="leaflet-control-attribution leaflet-control"><a href="https://leafletjs.com"
                        title="A JS library for interactive maps">Leaflet</a> | Map data © <a
                        href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a
                        href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a
                        href="https://www.mapbox.com/">Mapbox</a></div>
            </div>
        </div>
    </div>
    <form method="post" class="d-flex justify-content-center flex-column align-items-center my-5 card w-50 py-5">
        {% csrf_token %}

        <div class="d-flex justify-content-center w-50 align-items-center">
             <label for="lat-lng" class="col-4">lat and lng:</label>
            <input type="text" name="lat-lng" id="lat-lng" class="col-8 mx-1 d-flex my-1"/><!-- type = "hidden" -->
        </div>
        <div class="d-flex justify-content-center w-50 align-items-center">
            <label for="startCount" class="col-4">start counts:</label>
            <input type="text" name="startCount" id="startCount" class="col-8 mx-1 d-flex my-1"/>
        </div>

        <input type="submit" value="Set" class="d-flex mt-4 justify-content-center" style="width: 15%"/>
    </form>
    </div>

</div>
 <script>

        let loc = {{ myloc| safe}};
        var mymap = L.map('mapid').setView(loc, 13);
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(mymap);

        var locations = [];
        var Counter = 0;
        var popupContent = ' \
            <form id="popupForm" method="get" >\
                <input id="pCount" type="number"/>\
                <input type="submit" value="Set" />\
            </form>\
             ';

        var pCount = 0;
        mymap.on('click', function(e){
            Counter++;
  		    var coord = e.latlng;
  		    var lat = coord.lat;
  		    var lng = coord.lng;
            locations.push([lat,lng]);
            document.getElementById('lat-lng').value = locations.toString();
            document.getElementById('startCount').value = Counter.toString();
            L.marker(coord).addTo(mymap);//.bindPopup(popupContent).openPopup()
            pCount = L.DomUtil.get('pCount');
            console.log(pCount);
  		    console.log(Counter + "You clicked the map at latitude: " + lat + " and longitude: " + lng);
            console.log(locations);
  	    });



    </script>
</body>

</html>